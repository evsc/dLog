<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Dream Viz</title>
	<link rel="stylesheet" type="text/css" media="all" href="style.css" />
	<link rel="stylesheet" media="screen" type="text/css" href="lib/datepicker/css/datepicker.css" />
	<script src="http://code.jquery.com/jquery-1.7.min.js"></script>
	<script src="js/main.js"></script>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    // Load the Visualization API and the piechart package.
		// google.load('visualization', '1.0', {'packages':['corechart']});
		google.charts.load('current', {'packages':['corechart']});
      
      // called by main.js
		function drawChart(chartData) {

			console.log("drawChart: ");
			// console.log(chartData);
	  //       var data = new google.visualization.DataTable();
	  //       data.addColumn('string', 'Dreams');
	  //       data.addColumn('number', tagName);
			// data.addRows( chartData );

	        var options = {
	          title: 'Sentiment Score Scatterplot',
	          hAxis: {title: 'Time', minValue: 0, maxValue: 15},
	          vAxis: {title: 'Score'},
	          width: 1000, height: 500, legend: 'none',
	          chartArea:{left:100,top:50,width:"100%",height:"80%"},
	          hAxis: {format: 'dd/MM/yyyy'},
        	};

	        // var data = google.visualization.arrayToDataTable([
	        //   ['Day', 'Score'],
	        //   [ 8,      12],
	        //   [ 4,      -5.5],
	        //   [ 11,     14],
	        //   [ 4,      5],
	        //   [ 3,      3.5],
	        //   [ 6.5,    7]
	        // ]);

	        chartData.forEach(r => r[0] = new Date(r[0]));
	        // chartData.forEach(r => r[0] = new Date(r[0]));
	        // chartData.forEach(r => console.log(r[0]));


	        var data = new google.visualization.DataTable();
	        data.addColumn('date', 'Date');
	        data.addColumn('number', 'Score');
			// data.addRow([new Date(2011, 0, 1), 10])
   //  		data.addRow([new Date(2013, 1, 1), -15])
   //  		data.addRow([new Date(2023, 3, 1), -5])
			data.addRows( chartData );

	        var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
	        chart.draw(data, options);
	    }

	    $(document).ready(function(){
		    start('viz');
		    // setTimeout(function() {
	     //    	drawChart();
		    // }, 500);
		});

    </script>


</head>
<body>
	<div id="container">

		<div id="header">
			<div id="menu">
				<a href="/one">new</a> / 
				<a href="/all">all</a> / 
				<a href="/tags">tags</a>
			</div>
		</div>

		<div id="main">

			<h1>Dream Viz</h1>

			<div id="chart_div" style="width:800; height:500;"></div>

		</div>  <!-- end main -->
	</div>  <!-- end container -->
</body>
</html>